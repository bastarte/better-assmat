<div class="container">
  <div id="map"
    style="width: 100%; height: 600px;"
    data-markers="<%= @markers.to_json %>"
    data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>

  <table class= "table">
    <% @assmats.each do |assmat| %>
    <tr>
      <td><%= assmat.name %></td>
      <td><%= assmat.address %></td>
      <td><%= assmat.distance %></td>
      <% if @user_inputs[assmat] %>
        <td><%= @user_inputs[assmat].comment %></td>
        <td><%= @user_inputs[assmat].selected %></td>
        <td><%= simple_form_for [@user_inputs[assmat]], remote: true do |f| %>
            <%= f.input :comment %>
            <%= f.submit "Update" %>
          <% end %>
        </td>
        <!-- A cool option would be to use f.association to avoid creating the @user_inputs hash.
          However, it put even more stuff on the Assmat controller. So we'll directly use user_inputs instead.
        <td><%= simple_form_for assmat do |f| %>
            <%= f.association :user_inputs, label_method: :comment, value_method: :selected, as: :check_boxes %>
            <%= f.submit "Update" %>
          <% end %>
        </td>
        -->
      <% else %>
        <td></td>
        <td></td>
      <% end %>

    </tr>
    <% end %>
  </table>
</div>
